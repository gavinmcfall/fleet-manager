import{j as e,L as v,l as j,M as w,I,A,m as k,d as G,n as L}from"./vendor-ui-BoY7sAdT.js";import{a as i}from"./vendor-react-CGlDSCWT.js";import{a as E,b as F,c as R,g as C}from"./index-CD2RGnxz.js";const b={high:{icon:k,color:"text-sc-danger",bg:"bg-sc-danger/10",border:"border-sc-danger/20",label:"HIGH"},medium:{icon:A,color:"text-sc-warn",bg:"bg-sc-warn/10",border:"border-sc-warn/20",label:"MEDIUM"},low:{icon:I,color:"text-sc-accent",bg:"bg-sc-accent/10",border:"border-sc-accent/20",label:"LOW"}};function _(){const{data:t,loading:f,error:d}=E(),{data:r}=F(),{data:n}=R(),[o,x]=i.useState(null),[m,h]=i.useState(!1);i.useEffect(()=>{n!=null&&n.analysis&&x(n.analysis)},[n]);const N=async()=>{h(!0);try{const s=await C();x(s.analysis)}catch(s){alert("Failed to generate AI analysis: "+s.message)}finally{h(!1)}};if(f)return e.jsx("div",{className:"text-gray-500 font-mono text-sm p-8",children:"Analysing fleet..."});if(d)return e.jsxs("div",{className:"text-sc-danger font-mono text-sm p-8",children:["Error: ",d]});const p=(t==null?void 0:t.gap_analysis)||[],g=(t==null?void 0:t.redundancies)||[];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-display font-bold text-2xl tracking-wider text-white",children:"FLEET ANALYSIS"}),e.jsx("p",{className:"text-xs font-mono text-gray-500 mt-1",children:"Gap analysis and redundancy detection"})]}),e.jsx("div",{className:"glow-line"}),(r==null?void 0:r.api_key_set)&&e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:N,disabled:m,className:"btn-primary flex items-center gap-2",children:m?e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"w-4 h-4 animate-spin"}),"Generating AI Insights..."]}):e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"w-4 h-4"}),"Generate AI Insights"]})})}),o&&e.jsxs("div",{className:"panel",children:[e.jsxs("div",{className:"panel-header flex items-center gap-2",children:[e.jsx(j,{className:"w-3.5 h-3.5"}),"AI Fleet Insights"]}),e.jsx("div",{className:"p-5",children:e.jsx("div",{className:"prose prose-invert prose-sm max-w-none text-gray-300",children:e.jsx(w,{children:o})})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-display font-semibold text-sm uppercase tracking-widest text-gray-400 mb-3",children:"Role Gaps"}),p.length===0?e.jsx("div",{className:"panel p-6 text-center text-gray-500 text-sm",children:"No significant gaps detected. Your fleet covers all major roles!"}):e.jsx("div",{className:"space-y-3",children:p.map((s,l)=>{const a=b[s.priority]||b.low,c=a.icon;return e.jsx("div",{className:`panel border-l-2 ${a.border} overflow-hidden`,children:e.jsx("div",{className:"px-5 py-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(c,{className:`w-5 h-5 ${a.color} shrink-0 mt-0.5`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-display font-semibold text-white",children:s.role}),e.jsx("span",{className:`badge ${a.bg} ${a.color} border ${a.border}`,children:a.label})]}),e.jsx("p",{className:"text-sm text-gray-400 mb-3",children:s.description}),s.suggestions&&s.suggestions.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:s.suggestions.map((y,u)=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded bg-white/5 text-xs font-mono text-gray-300 border border-sc-border",children:[e.jsx(G,{className:"w-3 h-3 text-sc-accent"}),y]},u))})]})]})})},l)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-display font-semibold text-sm uppercase tracking-widest text-gray-400 mb-3",children:"Redundancies"}),g.length===0?e.jsx("div",{className:"panel p-6 text-center text-gray-500 text-sm",children:"No role redundancies detected."}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:g.map((s,l)=>e.jsxs("div",{className:"panel",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-sc-border/50 flex items-center gap-2",children:[e.jsx(L,{className:"w-3.5 h-3.5 text-sc-melt"}),e.jsx("span",{className:"font-display text-sm font-semibold text-white",children:s.role}),e.jsxs("span",{className:"ml-auto text-xs font-mono text-gray-500",children:[s.ships.length," ships"]})]}),e.jsxs("div",{className:"p-4 space-y-1.5",children:[s.ships.map((a,c)=>e.jsxs("div",{className:"text-sm text-gray-400 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-sc-border"}),a]},c)),s.notes&&e.jsx("p",{className:"text-xs text-gray-600 mt-2 pt-2 border-t border-sc-border/30",children:s.notes})]})]},l))})]})]})}export{_ as default};
