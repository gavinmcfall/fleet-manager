import{j as s,e as M,f as $,g as A}from"./vendor-ui-CKvTnmtk.js";import{a as o}from"./vendor-react-CGlDSCWT.js";import{u as D}from"./index-CH5yhmAP.js";function K(){const{data:i,loading:z,error:f}=D(),[h,C]=o.useState("ship_name"),[p,b]=o.useState("asc"),[x,L]=o.useState(""),[u,v]=o.useState("all"),E=o.useMemo(()=>{if(!i)return[];const e=new Set(i.map(t=>{var a;return((a=t.ship)==null?void 0:a.size_label)||"Unknown"}));return["all",...Array.from(e).sort()]},[i]),j=o.useMemo(()=>{if(!i)return[];let e=[...i];if(x){const t=x.toLowerCase();e=e.filter(a=>{var r,l,c,n;return a.ship_name.toLowerCase().includes(t)||((r=a.custom_name)==null?void 0:r.toLowerCase().includes(t))||((l=a.manufacturer_name)==null?void 0:l.toLowerCase().includes(t))||((n=(c=a.ship)==null?void 0:c.focus)==null?void 0:n.toLowerCase().includes(t))})}return u!=="all"&&(e=e.filter(t=>{var a;return(((a=t.ship)==null?void 0:a.size_label)||"Unknown")===u})),e.sort((t,a)=>{var c,n,d,m,g,N,w,y,_,k;let r,l;switch(h){case"ship_name":r=t.ship_name,l=a.ship_name;break;case"manufacturer":r=t.manufacturer_name,l=a.manufacturer_name;break;case"size":r=((c=t.ship)==null?void 0:c.size_label)||"",l=((n=a.ship)==null?void 0:n.size_label)||"";break;case"cargo":r=((d=t.ship)==null?void 0:d.cargo)||0,l=((m=a.ship)==null?void 0:m.cargo)||0;break;case"pledge":r=((g=t.ship)==null?void 0:g.pledge_price)||0,l=((N=a.ship)==null?void 0:N.pledge_price)||0;break;case"crew":r=((w=t.ship)==null?void 0:w.min_crew)||0,l=((y=a.ship)==null?void 0:y.min_crew)||0;break;case"focus":r=((_=t.ship)==null?void 0:_.focus)||"",l=((k=a.ship)==null?void 0:k.focus)||"";break;default:r=t.ship_name,l=a.ship_name}if(typeof r=="string"){const S=r.localeCompare(l);return p==="asc"?S:-S}return p==="asc"?r-l:l-r}),e},[i,x,u,h,p]),F=e=>{h===e?b(p==="asc"?"desc":"asc"):(C(e),b("asc"))};return z?s.jsx("div",{className:"text-gray-500 font-mono text-sm p-8",children:"Loading fleet..."}):f?s.jsxs("div",{className:"text-sc-danger font-mono text-sm p-8",children:["Error: ",f]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"font-display font-bold text-2xl tracking-wider text-white",children:"MY FLEET"}),s.jsxs("span",{className:"text-xs font-mono text-gray-500",children:[j.length," vehicles"]})]}),s.jsx("div",{className:"glow-line"}),s.jsxs("div",{className:"flex gap-3 items-center",children:[s.jsxs("div",{className:"relative flex-1 max-w-sm",children:[s.jsx(M,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-600"}),s.jsx("input",{type:"text",placeholder:"Search ships...",value:x,onChange:e=>L(e.target.value),className:"w-full bg-sc-panel border border-sc-border rounded pl-10 pr-4 py-2 text-sm font-mono text-gray-300 placeholder:text-gray-600 focus:outline-none focus:border-sc-accent/50"})]}),s.jsx("select",{value:u,onChange:e=>v(e.target.value),className:"bg-sc-panel border border-sc-border rounded px-3 py-2 text-sm font-mono text-gray-300 focus:outline-none focus:border-sc-accent/50",children:E.map(e=>s.jsx("option",{value:e,children:e==="all"?"All Sizes":e},e))})]}),s.jsx("div",{className:"panel overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-sc-darker/50",children:[[{key:"ship_name",label:"Ship"},{key:"manufacturer",label:"Manufacturer"},{key:"size",label:"Size"},{key:"focus",label:"Role"},{key:"cargo",label:"Cargo"},{key:"crew",label:"Crew"},{key:"pledge",label:"Pledge $"}].map(({key:e,label:t})=>s.jsx("th",{className:"table-header cursor-pointer hover:text-gray-300 select-none",onClick:()=>F(e),children:s.jsxs("span",{className:"flex items-center gap-1",children:[t,s.jsx($,{className:`w-3 h-3 ${h===e?"text-sc-accent":"text-gray-700"}`})]})},e)),s.jsx("th",{className:"table-header",children:"Insurance"})]})}),s.jsx("tbody",{children:j.map((e,t)=>{var a,r,l,c,n,d,m;return s.jsxs("tr",{className:"hover:bg-white/[0.02] transition-colors",children:[s.jsx("td",{className:"table-cell",children:s.jsxs("div",{className:"flex items-center gap-3",children:[((a=e.ship)==null?void 0:a.image_url)&&s.jsx("img",{src:e.ship.image_url,alt:e.ship_name,loading:"lazy",className:"w-16 h-16 object-cover rounded border border-sc-border/50",onError:g=>g.target.style.display="none"}),s.jsxs("div",{className:"flex items-center gap-2",children:[e.flagship&&s.jsx(A,{className:"w-3 h-3 text-sc-warn fill-sc-warn"}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-white",children:e.ship_name}),e.custom_name&&s.jsxs("span",{className:"block text-xs text-gray-500 italic",children:['"',e.custom_name,'"']})]})]})]})}),s.jsx("td",{className:"table-cell text-gray-400",children:e.manufacturer_name}),s.jsx("td",{className:"table-cell",children:s.jsx("span",{className:"badge badge-size",children:((r=e.ship)==null?void 0:r.size_label)||"?"})}),s.jsx("td",{className:"table-cell text-gray-400",children:((l=e.ship)==null?void 0:l.focus)||"-"}),s.jsx("td",{className:"table-cell font-mono text-gray-400",children:(c=e.ship)!=null&&c.cargo?e.ship.cargo.toLocaleString():"-"}),s.jsxs("td",{className:"table-cell font-mono text-gray-400",children:[((n=e.ship)==null?void 0:n.min_crew)||0,"-",((d=e.ship)==null?void 0:d.max_crew)||0]}),s.jsx("td",{className:"table-cell font-mono text-gray-400",children:(m=e.ship)!=null&&m.pledge_price?`$${e.ship.pledge_price}`:"-"}),s.jsx("td",{className:"table-cell",children:e.hangar_import?e.hangar_import.lti?s.jsx("span",{className:"badge badge-lti",children:"LTI"}):s.jsx("span",{className:"badge badge-nonlti",children:"Standard"}):s.jsx("span",{className:"text-xs text-gray-600",children:"â€”"})})]},t)})})]})})})]})}export{K as default};
