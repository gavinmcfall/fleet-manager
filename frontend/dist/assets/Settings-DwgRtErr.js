import{j as e,c as I,K as P,E as M,s as F,L as N,q as w,X as E,p as G}from"./vendor-ui-BoY7sAdT.js";import{a as t}from"./vendor-react-CGlDSCWT.js";import{b as _,t as K,j as C}from"./index-CD2RGnxz.js";function $(){const{data:a,refetch:p}=_(),[n,u]=t.useState(""),[l,m]=t.useState(""),[o,i]=t.useState(""),[g,x]=t.useState([]),[y,f]=t.useState(!1),[c,d]=t.useState(null),[v,j]=t.useState(!1),[k,b]=t.useState(!1),[h,S]=t.useState(!1);t.useEffect(()=>{a&&(u(a.provider||""),i(a.model||""))},[a]);const L=async()=>{if(!(!n||!l)){f(!0),d(null),x([]);try{const r=(await K(n,l)).models||[];x(r),d({success:!0,modelCount:r.length}),r.length>0&&!o&&i(r[0].id)}catch(s){d({success:!1,error:s.message})}finally{f(!1)}}},A=async()=>{j(!0);try{await C({provider:n,api_key:l,model:o}),b(!0),setTimeout(()=>b(!1),2e3),p(),m("")}catch(s){alert("Failed to save: "+s.message)}finally{j(!1)}},T=async()=>{if(window.confirm(`Are you sure you want to remove your LLM configuration?

This will delete your encrypted API key and model settings. You will need to re-configure to use AI fleet analysis.`))try{await C({provider:"",api_key:"",model:""}),u(""),m(""),i(""),x([]),d(null),await p(),alert("LLM configuration cleared successfully")}catch(r){alert("Failed to clear configuration: "+r.message)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-display font-bold text-2xl tracking-wider text-white",children:"SETTINGS"}),e.jsx("p",{className:"text-xs font-mono text-gray-500 mt-1",children:"Configure LLM provider for AI fleet analysis"})]}),e.jsx("div",{className:"glow-line"}),e.jsxs("div",{className:"panel",children:[e.jsxs("div",{className:"panel-header flex items-center gap-2",children:[e.jsx(I,{className:"w-3.5 h-3.5"}),"LLM Provider"]}),e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Choose your AI provider. You'll need to provide your own API key."}),e.jsx("div",{className:"space-y-2",children:[{value:"openai",label:"OpenAI (ChatGPT)",desc:"GPT-4, GPT-3.5-turbo models"},{value:"anthropic",label:"Anthropic (Claude)",desc:"Claude Opus, Sonnet, Haiku"},{value:"google",label:"Google (Gemini)",desc:"Gemini Pro, Gemini Flash"}].map(s=>e.jsxs("label",{className:`block p-4 rounded border-2 cursor-pointer transition-colors ${n===s.value?"border-sc-accent bg-sc-accent/10":"border-sc-border hover:border-sc-border/50"}`,children:[e.jsx("input",{type:"radio",name:"provider",value:s.value,checked:n===s.value,onChange:r=>u(r.target.value),className:"mr-3"}),e.jsx("span",{className:"text-white font-medium",children:s.label}),e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:s.desc})]},s.value))})]})]}),n&&e.jsxs("div",{className:"panel",children:[e.jsxs("div",{className:"panel-header flex items-center gap-2",children:[e.jsx(P,{className:"w-3.5 h-3.5"}),"API Key"]}),e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Your API key is encrypted and stored securely. It never leaves your server."}),(a==null?void 0:a.api_key_set)&&e.jsxs("div",{className:"p-3 rounded bg-sc-accent/10 border border-sc-accent/20 text-xs text-sc-accent",children:["Current key: ",e.jsx("span",{className:"font-mono",children:a.api_key_mask})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:h?"text":"password",value:l,onChange:s=>m(s.target.value),placeholder:"Enter your API key",className:"w-full bg-sc-darker border border-sc-border rounded px-3 py-2 pr-10 text-sm font-mono text-gray-300 placeholder:text-gray-600 focus:outline-none focus:border-sc-accent/50"}),l&&e.jsx("button",{type:"button",onClick:()=>S(!h),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300 transition-colors",children:h?e.jsx(M,{className:"w-4 h-4"}):e.jsx(F,{className:"w-4 h-4"})})]}),e.jsx("button",{onClick:L,disabled:!l||y,className:"btn-primary flex items-center gap-2",children:y?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"w-3.5 h-3.5 animate-spin"}),"Testing Connection..."]}):"Test Connection"}),c&&e.jsx("div",{className:`p-3 rounded flex items-center gap-2 ${c.success?"bg-sc-success/10 border border-sc-success/20 text-sc-success":"bg-sc-danger/10 border border-sc-danger/20 text-sc-danger"}`,children:c.success?e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"w-4 h-4"}),"Connection successful! Found ",c.modelCount," model",c.modelCount!==1?"s":"","."]}):e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"w-4 h-4"}),c.error]})})]})]}),g.length>0&&e.jsxs("div",{className:"panel",children:[e.jsx("div",{className:"panel-header",children:"Select Model"}),e.jsx("div",{className:"p-5",children:e.jsx("select",{value:o,onChange:s=>i(s.target.value),className:"w-full bg-sc-darker border border-sc-border rounded px-3 py-2 text-sm text-gray-300 focus:outline-none focus:border-sc-accent/50",children:g.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))})})]}),n&&l&&o&&e.jsx("button",{onClick:A,disabled:v,className:"btn-primary w-full flex items-center justify-center gap-2",children:k?e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"w-4 h-4"}),"Saved!"]}):v?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):"Save Configuration"}),(a==null?void 0:a.api_key_set)&&e.jsxs("button",{onClick:T,className:"w-full flex items-center justify-center gap-2 px-4 py-2 rounded border-2 border-sc-danger/30 text-sc-danger hover:bg-sc-danger/10 transition-colors text-sm font-medium",children:[e.jsx(G,{className:"w-3.5 h-3.5"}),"Clear Configuration"]})]})}export{$ as default};
