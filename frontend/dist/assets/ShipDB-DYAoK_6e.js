import{j as s,D as z,e as B,f as D}from"./vendor-ui-CKvTnmtk.js";import{a}from"./vendor-react-CGlDSCWT.js";import{j as M}from"./index-Bg8Ke_04.js";function P(){const{data:r,loading:j,error:p}=M(),[i,b]=a.useState(""),[d,y]=a.useState("all"),[m,v]=a.useState("all"),[u,N]=a.useState("all"),[x,w]=a.useState("all"),[g,S]=a.useState("name"),[c,_]=a.useState("asc"),C=a.useMemo(()=>{if(!r)return[];const e=new Set(r.map(t=>t.manufacturer_name).filter(Boolean));return["all",...Array.from(e).sort()]},[r]),A=a.useMemo(()=>{if(!r)return[];const e=new Set(r.map(t=>t.size_label).filter(Boolean));return["all",...Array.from(e).sort()]},[r]),F=a.useMemo(()=>{if(!r)return[];const e=new Set(r.map(t=>t.classification).filter(Boolean));return["all",...Array.from(e).sort()]},[r]),k=a.useMemo(()=>{if(!r)return[];const e=new Set(r.map(t=>t.production_status).filter(Boolean));return["all",...Array.from(e).sort()]},[r]),f=a.useMemo(()=>{if(!r)return[];let e=[...r];if(i){const t=i.toLowerCase();e=e.filter(o=>{var l,n;return o.name.toLowerCase().includes(t)||((l=o.manufacturer_name)==null?void 0:l.toLowerCase().includes(t))||((n=o.focus)==null?void 0:n.toLowerCase().includes(t))})}return d!=="all"&&(e=e.filter(t=>t.manufacturer_name===d)),m!=="all"&&(e=e.filter(t=>t.size_label===m)),u!=="all"&&(e=e.filter(t=>t.classification===u)),x!=="all"&&(e=e.filter(t=>t.production_status===x)),e.sort((t,o)=>{let l,n;switch(g){case"name":l=t.name,n=o.name;break;case"price":l=t.pledge_price||0,n=o.pledge_price||0;break;case"cargo":l=t.cargo||0,n=o.cargo||0;break;default:l=t.name,n=o.name}if(typeof l=="string"){const h=l.localeCompare(n);return c==="asc"?h:-h}return c==="asc"?l-n:n-l}),e},[r,i,d,m,u,x,g,c]);return j?s.jsx("div",{className:"text-gray-500 font-mono text-sm p-8",children:"Loading ship database..."}):p?s.jsxs("div",{className:"text-sc-danger font-mono text-sm p-8",children:["Error: ",p]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"font-display font-bold text-2xl tracking-wider text-white",children:"SHIP DATABASE"}),s.jsxs("p",{className:"text-xs font-mono text-gray-500 mt-1",children:[(r==null?void 0:r.length)||0," ships synced from FleetYards"]})]}),s.jsx(z,{className:"w-5 h-5 text-gray-600"})]}),s.jsx("div",{className:"glow-line"}),s.jsxs("div",{className:"relative max-w-md",children:[s.jsx(B,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-600"}),s.jsx("input",{type:"text",placeholder:"Search ships...",value:i,onChange:e=>b(e.target.value),className:"w-full bg-sc-panel border border-sc-border rounded pl-10 pr-4 py-2 text-sm font-mono text-gray-300 placeholder:text-gray-600 focus:outline-none focus:border-sc-accent/50"})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:[s.jsx("select",{value:d,onChange:e=>y(e.target.value),className:"bg-sc-panel border border-sc-border rounded px-3 py-2 text-sm font-mono text-gray-300 focus:outline-none focus:border-sc-accent/50",children:C.map(e=>s.jsx("option",{value:e,children:e==="all"?"All Manufacturers":e},e))}),s.jsx("select",{value:u,onChange:e=>N(e.target.value),className:"bg-sc-panel border border-sc-border rounded px-3 py-2 text-sm font-mono text-gray-300 focus:outline-none focus:border-sc-accent/50",children:F.map(e=>s.jsx("option",{value:e,children:e==="all"?"All Classes":e},e))}),s.jsx("select",{value:m,onChange:e=>v(e.target.value),className:"bg-sc-panel border border-sc-border rounded px-3 py-2 text-sm font-mono text-gray-300 focus:outline-none focus:border-sc-accent/50",children:A.map(e=>s.jsx("option",{value:e,children:e==="all"?"All Sizes":e},e))}),s.jsx("select",{value:x,onChange:e=>w(e.target.value),className:"bg-sc-panel border border-sc-border rounded px-3 py-2 text-sm font-mono text-gray-300 focus:outline-none focus:border-sc-accent/50",children:k.map(e=>s.jsx("option",{value:e,children:e==="all"?"All Statuses":e},e))}),s.jsxs("select",{value:g,onChange:e=>S(e.target.value),className:"bg-sc-panel border border-sc-border rounded px-3 py-2 text-sm font-mono text-gray-300 focus:outline-none focus:border-sc-accent/50",children:[s.jsx("option",{value:"name",children:"Sort: Name"}),s.jsx("option",{value:"price",children:"Sort: Price"}),s.jsx("option",{value:"cargo",children:"Sort: Cargo"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{onClick:()=>_(c==="asc"?"desc":"asc"),className:"btn-secondary flex items-center gap-2 text-xs",children:[s.jsx(D,{className:"w-3.5 h-3.5"}),c==="asc"?"Ascending":"Descending"]}),s.jsxs("span",{className:"text-xs font-mono text-gray-500",children:[f.length," results"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:f.slice(0,60).map(e=>s.jsxs("div",{className:"panel hover:border-sc-accent/20 transition-colors overflow-hidden",children:[e.image_url&&s.jsx("div",{className:"w-full h-40 bg-sc-darker/50 overflow-hidden",children:s.jsx("img",{src:e.image_url_medium||e.image_url,alt:e.name,loading:"lazy",className:"w-full h-full object-cover",onError:t=>t.target.parentElement.style.display="none"})}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-display font-semibold text-white text-sm",children:e.name}),s.jsx("span",{className:"text-xs text-gray-500",children:e.manufacturer_name})]}),s.jsx("span",{className:"badge badge-size text-[10px]",children:e.size_label})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs font-mono text-gray-400 mt-3",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600 block",children:"Role"}),e.focus||"-"]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600 block",children:"Cargo"}),e.cargo>0?`${e.cargo} SCU`:"-"]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600 block",children:"Crew"}),e.min_crew,"-",e.max_crew]})]}),s.jsxs("div",{className:"flex items-center justify-between mt-3 pt-2 border-t border-sc-border/30",children:[s.jsx("span",{className:"text-xs font-mono text-gray-500",children:e.production_status==="flight-ready"?"âœ… Flight Ready":"ðŸ”§ "+e.production_status}),e.pledge_price>0&&s.jsxs("span",{className:"text-xs font-mono text-sc-warn",children:["$",e.pledge_price]})]})]})]},e.slug))}),f.length>60&&s.jsxs("p",{className:"text-center text-xs font-mono text-gray-600 py-4",children:["Showing 60 of ",f.length," â€” refine your search to see more"]})]})}export{P as default};
