import{j as a,e as w,f as k}from"./vendor-ui-BoY7sAdT.js";import{a as n}from"./vendor-react-CGlDSCWT.js";import{u as v}from"./index-CD2RGnxz.js";function L(){const{data:c,loading:p,error:u}=v(),[i,b]=n.useState("vehicle_name"),[d,h]=n.useState("asc"),[m,j]=n.useState(""),[x,N]=n.useState("all"),_=n.useMemo(()=>{if(!c)return[];const e=new Set(c.map(s=>s.size_label||"Unknown"));return["all",...Array.from(e).sort()]},[c]),f=n.useMemo(()=>{if(!c)return[];let e=[...c];if(m){const s=m.toLowerCase();e=e.filter(l=>{var t,r,o,g;return((t=l.vehicle_name)==null?void 0:t.toLowerCase().includes(s))||((r=l.custom_name)==null?void 0:r.toLowerCase().includes(s))||((o=l.manufacturer_name)==null?void 0:o.toLowerCase().includes(s))||((g=l.focus)==null?void 0:g.toLowerCase().includes(s))})}return x!=="all"&&(e=e.filter(s=>(s.size_label||"Unknown")===x)),e.sort((s,l)=>{let t,r;switch(i){case"vehicle_name":t=s.vehicle_name,r=l.vehicle_name;break;case"manufacturer":t=s.manufacturer_name,r=l.manufacturer_name;break;case"size":t=s.size_label||"",r=l.size_label||"";break;case"cargo":t=s.cargo||0,r=l.cargo||0;break;case"pledge":t=s.pledge_price||0,r=l.pledge_price||0;break;case"crew":t=s.crew_min||0,r=l.crew_min||0;break;case"focus":t=s.focus||"",r=l.focus||"";break;default:t=s.vehicle_name,r=l.vehicle_name}if(typeof t=="string"){const o=t.localeCompare(r);return d==="asc"?o:-o}return d==="asc"?t-r:r-t}),e},[c,m,x,i,d]),y=e=>{i===e?h(d==="asc"?"desc":"asc"):(b(e),h("asc"))};return p?a.jsx("div",{className:"text-gray-500 font-mono text-sm p-8",children:"Loading fleet..."}):u?a.jsxs("div",{className:"text-sc-danger font-mono text-sm p-8",children:["Error: ",u]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"font-display font-bold text-2xl tracking-wider text-white",children:"MY FLEET"}),a.jsxs("span",{className:"text-xs font-mono text-gray-500",children:[f.length," vehicles"]})]}),a.jsx("div",{className:"glow-line"}),a.jsxs("div",{className:"flex gap-3 items-center",children:[a.jsxs("div",{className:"relative flex-1 max-w-sm",children:[a.jsx(w,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-600"}),a.jsx("input",{type:"text",placeholder:"Search ships...",value:m,onChange:e=>j(e.target.value),className:"w-full bg-sc-panel border border-sc-border rounded pl-10 pr-4 py-2 text-sm font-mono text-gray-300 placeholder:text-gray-600 focus:outline-none focus:border-sc-accent/50"})]}),a.jsx("select",{value:x,onChange:e=>N(e.target.value),className:"bg-sc-panel border border-sc-border rounded px-3 py-2 text-sm font-mono text-gray-300 focus:outline-none focus:border-sc-accent/50",children:_.map(e=>a.jsx("option",{value:e,children:e==="all"?"All Sizes":e},e))})]}),a.jsx("div",{className:"panel overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-sc-darker/50",children:[[{key:"vehicle_name",label:"Ship"},{key:"manufacturer",label:"Manufacturer"},{key:"size",label:"Size"},{key:"focus",label:"Role"},{key:"cargo",label:"Cargo"},{key:"crew",label:"Crew"},{key:"pledge",label:"Pledge $"}].map(({key:e,label:s})=>a.jsx("th",{className:"table-header cursor-pointer hover:text-gray-300 select-none",onClick:()=>y(e),children:a.jsxs("span",{className:"flex items-center gap-1",children:[s,a.jsx(k,{className:`w-3 h-3 ${i===e?"text-sc-accent":"text-gray-700"}`})]})},e)),a.jsx("th",{className:"table-header",children:"Insurance"})]})}),a.jsx("tbody",{children:f.map((e,s)=>a.jsxs("tr",{className:"hover:bg-white/[0.02] transition-colors",children:[a.jsx("td",{className:"table-cell",children:a.jsxs("div",{className:"flex items-center gap-3",children:[e.image_url&&a.jsx("img",{src:e.image_url,alt:e.vehicle_name,loading:"lazy",className:"w-16 h-16 object-cover rounded border border-sc-border/50",onError:l=>l.target.style.display="none"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-white",children:e.vehicle_name}),e.custom_name&&a.jsxs("span",{className:"block text-xs text-gray-500 italic",children:['"',e.custom_name,'"']})]})]})}),a.jsx("td",{className:"table-cell text-gray-400",children:e.manufacturer_name}),a.jsx("td",{className:"table-cell",children:a.jsx("span",{className:"badge badge-size",children:e.size_label||"?"})}),a.jsx("td",{className:"table-cell text-gray-400",children:e.focus||"-"}),a.jsx("td",{className:"table-cell font-mono text-gray-400",children:e.cargo?e.cargo.toLocaleString():"-"}),a.jsxs("td",{className:"table-cell font-mono text-gray-400",children:[e.crew_min||0,"-",e.crew_max||0]}),a.jsx("td",{className:"table-cell font-mono text-gray-400",children:e.pledge_price?`$${e.pledge_price}`:"-"}),a.jsx("td",{className:"table-cell",children:e.insurance_label?e.is_lifetime?a.jsx("span",{className:"badge badge-lti",children:"LTI"}):a.jsx("span",{className:"badge badge-nonlti",children:e.insurance_label}):a.jsx("span",{className:"text-xs text-gray-600",children:"â€”"})})]},s))})]})})})]})}export{L as default};
